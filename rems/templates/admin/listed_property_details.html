{% extends 'admin/dashboard.html' %}
{% load static %}
{% block title %}Add Property{% endblock %}
{% block extracssjs %}
<script type="text/javascript" src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
{% endblock %}
{% block content %}
<div class="go-back">
    <a href="javascript:void(0);" onclick="window.history.back();">
        <span class="icon">
            <ion-icon name="arrow-back-outline"></ion-icon>
        </span>
    </a>
</div>
<div class="insider">
    <div class="row">
        <div class="cardHeader">
            <form action="{% url 'update-property' property.id %}" method="post" class="animated-form"
                enctype="multipart/form-data">
                {% csrf_token %}
                <h2>Property Details</h2>
                {% if messages %}
                <ul class="messages">
                    {% for message in messages %}
                    <li>{% if message.tags %} class="{{ message.tags }}" {% endif %}>{{ message }}</li>
                    {% endfor %}
                </ul><br>
                {% endif %}
                {% if property %}
                <div class="form-group">
                    <div class="left">
                        <label for="property-type">Property Type:</label>
                        <input type="text" value="{{ property.property_type }}" id="property-type" name="property-type"
                            readonly>
                    </div>
                    <div class="right">
                        <label for="property-for">Property For:</label>
                        <input type="text" value="{{ property.property_for }}" id="property-for" name="property-for"
                            readonly>
                    </div>
                </div>
                <div id="house-form">
                    <div class="form-group">
                        <div class="middle">
                            <label for="flat-number">No of Flat:</label>
                            <input type="text" value="{{ property.flat_number }}" id="flat-number" name="flat-number"
                                readonly>
                        </div>
                        <div class="middle">
                            <label for="bed-number">Bedroom:</label>
                            <input type="text" value="{{ property.bedrooms }}" id="bed-number" name="bed-number"
                                readonly>
                        </div>
                        <div class="middle">
                            <label for="bath-number">Bathroom:</label>
                            <input type="text" value="{{ property.bathrooms }}" id="bath-number" name="bath-number"
                                readonly>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="middle">
                            <label for="living-number">Living Room:</label>
                            <input type="text" value="{{ property.living_rooms }}" id="living-number"
                                name="living-number" readonly>
                        </div>
                        <div class="middle">
                            <label for="kitchen-number">Kitchen:</label>
                            <input type="text" value="{{ property.kitchens }}" id="kitchen-number" name="kitchen-number"
                                readonly>
                        </div>
                        <div class="middle">
                            <label for="total-number">Total Rooms:</label>
                            <input type="text" value="{{ property.total_rooms }}" id="total-number" name="total-number"
                                readonly>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="middle">
                            <label for="parking">Parking</label>
                            <input type="text" value="{{ property.parking }}" id="parking" name="parking" readonly>
                        </div>
                        <div class="middle">
                            <label for="built-year">Built Year:</label>
                            <input type="text" value="{{ property.built_year }}" id="built-year" name="built-year"
                                readonly>
                        </div>
                        <div class="middle">
                            <label for="built-area">Built Area:</label>
                            <input type="text" value="{{ property.built_area }}" id="built-area" name="built-area"
                                readonly>
                        </div>
                    </div>
                </div>
                <div class="form-group"></div>
                <div id="land-form">
                    <div class="form-group">
                        <div class="middle">
                            <label for="road-size">Road Size: <span class="required">*</span></label>
                            <input type="text" value="{{ property.road_size }}" id="road-size" name="road-size"
                                readonly>
                        </div>
                        <div class="middle">
                            <label for="land-area">Land Area:</label>
                            <input type="text" value="{{ property.land_area }}" id="land-area" name="land-area">
                        </div>
                        <div class="middle">
                            <label for="type">Type: <span class="required">*</span></label>
                            <input type="text" value="{{ property.type }}" id="type" name="type" readonly>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="middle">
                            <label for="facing-direction">Facing Direction: <span class="required">*</span></label>
                            <input type="text" value="{{ property.facing_direction }}" id="facing-direction"
                                name="facing-direction" readonly>
                        </div>
                        <div class="middle">
                            <label for="property-price">Price:</label>
                            <input type="text" value="{{ property.price }}" id="property-price" name="property-price"
                                oninput="formatNumber(this)" required>
                        </div>
                        <div class="middle">
                            <label for="price-per-unit">Price Per Unit:</label>
                            <input type="text" value="{{ property.price_per_unit }}" id="price-per-unit"
                                name="price-per-unit" readonly>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="description">Description:</label>
                        <textarea id="description" name="description" rows="4"
                            readonly>{{ property.full_description }}</textarea>
                    </div>
                </div>
                <div class="form-group">
                    <div class="middle">
                        <label for="province">Province: </label>
                        <input type="text" value="{{ property.province }}" id="province" name="province" readonly>
                    </div>
                    <div class="middle">
                        <label for="district">District: </label>
                        <input type="text" value="{{ property.district }}" id="district" name="district" readonly>
                    </div>
                    <div class="middle">
                        <label for="zip-code">Zip Code: </label>
                        <input type="text" value="{{ property.zip_code }}" id="zip-code" name="zip-code" readonly>
                    </div>
                </div>
                <div class="form-group">
                    <div class="left">
                        <label for="city">City: </label>
                        <input type="text" value="{{ property.city }}" id="city" name="city" readonly>
                    </div>
                    <div class="right">
                        <label for="municipality">Municipality: </label>
                        <input type="text" value="{{ property.municipality }}" id="municipality" name="municipality"
                            readonly>
                    </div>
                </div>
                <div class="form-group">
                    <div class="left">
                        <label for="ward-no">Ward No: </label>
                        <input type="text" value="{{ property.ward_no }}" id="ward-no" name="ward-no" readonly>
                    </div>
                    <div class="right">
                        <label for="tole">Tole:</label>
                        <input type="text" value="{{ property.tole }}" id="tole" name="tole" readonly>
                    </div>
                </div>
                <div class="form-group">
                    <label for="status">Status: </label>
                    <input type="text" value="Available" id="status" name="status" readonly>
                </div>
                <div class="form-group">
                    <label for="featured">Featured: </label>
                    <input type="checkbox" name="featured" id="featured" style="width: 20px; height: 20px;">
                </div>
                <div class="form-group"></div>
                <h2>Upload Images</h2>
                <div class="form-group">
                    <label for="front-image">Front Image: <span class="required">*</span></label>
                    <div class="file-upload">
                        <div class="file-select">
                            <div class="file-select-button" id="fileName">Choose File</div>
                            <div class="file-select-name" id="noFile">No file chosen...</div>
                            <input type="file" name="front-image" id="front-image" required>
                            <div id="fileError" class="error-message"></div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="side-image">Side Image: <span class="required">*</span></label>
                    <div class="file-upload">
                        <div class="file-select">
                            <div class="file-select-button" id="fileName">Choose File</div>
                            <div class="file-select-name" id="noFile">No file chosen...</div>
                            <input type="file" name="side-image" id="side-image" required>
                            <div id="fileError" class="error-message"></div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="extra1-image">LivingRoom/Bedroom Image:</label>
                    <div class="file-upload">
                        <div class="file-select">
                            <div class="file-select-button" id="fileName">Choose File</div>
                            <div class="file-select-name" id="noFile">No file chosen...</div>
                            <input type="file" name="extra1-image" id="extra1-image">
                            <div id="fileError" class="error-message"></div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="extra2-image">Kitchen/Other Image:</label>
                    <div class="file-upload">
                        <div class="file-select">
                            <div class="file-select-button" id="fileName">Choose File</div>
                            <div class="file-select-name" id="noFile">No file chosen...</div>
                            <input type="file" name="extra2-image" id="extra2-image">
                            <div id="fileError" class="error-message"></div>
                        </div>
                    </div>
                </div>
                {% endif %}
                <button type="submit">Update</button>
            </form>
        </div>
    </div>
</div>
<script>
    // getting references to the form and the two divs containing the fields
    const form = document.querySelector('form');
    const houseForm = document.getElementById('house-form');
    const landForm = document.getElementById('land-form');

    // add an event listener to the select element to show/hide the appropriate form fields
    const select = document.getElementById('property-type');
    select.addEventListener('change', (event) => {
        if (event.target.value === 'Land') {
            houseForm.style.display = 'none';
            landForm.style.display = 'block';
        }
        else if (event.target.value === 'House' || 'Flat' || 'Apartment' || 'Commercial Property') {
            houseForm.style.display = 'block';
            landForm.style.display = 'block';
        }
    });

</script>
{% endblock %}